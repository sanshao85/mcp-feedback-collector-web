# ğŸ”§ Augment MCP é›†æˆé—®é¢˜è§£å†³æ–¹æ¡ˆ

## ğŸ“‹ é—®é¢˜æè¿°

**ç°è±¡**: 
- Augment Code ä¸­ MCP æœåŠ¡å™¨æ˜¾ç¤ºçº¢è‰²çŠ¶æ€ç¯
- é”™è¯¯ä¿¡æ¯: "All tools for this MCP server have validation errors: collect_feedback"
- å¼€å…³æ— æ³•æ­£å¸¸å¯ç”¨ï¼Œå§‹ç»ˆä¿æŒçº¢è‰²çŠ¶æ€
- Cursor ä¸­åŒæ ·çš„é…ç½®æ˜¾ç¤ºç»¿è‰²ï¼Œå·¥ä½œæ­£å¸¸

## ğŸ” æ ¹æœ¬åŸå› åˆ†æ

é€šè¿‡å¯¹æ¯” MCP TypeScript SDK çš„æœ€æ–°ç‰ˆæœ¬ (v1.12.1) å’Œæˆ‘ä»¬çš„å®ç°ï¼Œå‘ç°äº†é—®é¢˜çš„æ ¹æœ¬åŸå› ï¼š

### 1. MCP SDK API å˜æ›´
æ–°ç‰ˆæœ¬çš„ MCP SDK å¼•å…¥äº†æ–°çš„å·¥å…·æ³¨å†Œæ–¹å¼ï¼Œæ¨èä½¿ç”¨ `registerTool()` æ–¹æ³•è€Œä¸æ˜¯æ—§çš„ `tool()` æ–¹æ³•ã€‚

### 2. å·¥å…·å®šä¹‰æ ¼å¼è¦æ±‚
Augment Code å¯¹ MCP å·¥å…·å®šä¹‰çš„éªŒè¯æ›´åŠ ä¸¥æ ¼ï¼Œéœ€è¦ï¼š
- å®Œæ•´çš„å·¥å…·æè¿° (description)
- æ­£ç¡®çš„è¾“å…¥æ¨¡å¼å®šä¹‰ (inputSchema)
- ç¬¦åˆæœ€æ–° MCP è§„èŒƒçš„æ ¼å¼

### 3. ç¼–è¾‘å™¨å·®å¼‚
- **Cursor**: å¯¹ MCP å·¥å…·å®šä¹‰çš„éªŒè¯ç›¸å¯¹å®½æ¾ï¼Œå…¼å®¹æ—§æ ¼å¼
- **Augment**: ä¸¥æ ¼æŒ‰ç…§æœ€æ–° MCP è§„èŒƒéªŒè¯ï¼Œä¸å…¼å®¹æ—§æ ¼å¼

## âœ… è§£å†³æ–¹æ¡ˆ

### ä¿®å¤å‰çš„ä»£ç  (æœ‰é—®é¢˜)
```typescript
// æ—§çš„å·¥å…·æ³¨å†Œæ–¹å¼ - åœ¨ Augment ä¸­ä¼šå¯¼è‡´éªŒè¯é”™è¯¯
this.mcpServer.tool(
  'collect_feedback',
  {
    work_summary: z.string().describe('AIå·¥ä½œæ±‡æŠ¥å†…å®¹')
  },
  async (args: { work_summary: string }): Promise<CallToolResult> => {
    // ... å®ç°é€»è¾‘
  }
);
```

### ä¿®å¤åçš„ä»£ç  (æ­£ç¡®)
```typescript
// æ–°çš„å·¥å…·æ³¨å†Œæ–¹å¼ - ç¬¦åˆæœ€æ–° MCP è§„èŒƒ
this.mcpServer.registerTool(
  'collect_feedback',
  {
    description: 'Collect feedback from users about AI work summary. This tool opens a web interface for users to provide feedback on the AI\'s work.',
    inputSchema: {
      work_summary: z.string().describe('AIå·¥ä½œæ±‡æŠ¥å†…å®¹ï¼Œæè¿°AIå®Œæˆçš„å·¥ä½œå’Œç»“æœ')
    }
  },
  async (args: { work_summary: string }): Promise<CallToolResult> => {
    // ... å®ç°é€»è¾‘
  }
);
```

### å…³é”®æ”¹è¿›ç‚¹

1. **ä½¿ç”¨ `registerTool()` æ–¹æ³•**
   - æ–°çš„æ¨è APIï¼Œæ›´å¥½çš„ç±»å‹å®‰å…¨
   - æ”¯æŒæ›´è¯¦ç»†çš„å·¥å…·é…ç½®

2. **æ·»åŠ å®Œæ•´çš„å·¥å…·æè¿°**
   - `description` å­—æ®µæ˜¯å¿…éœ€çš„
   - æä¾›æ¸…æ™°çš„å·¥å…·åŠŸèƒ½è¯´æ˜

3. **ä½¿ç”¨ `inputSchema` åŒ…è£…å‚æ•°**
   - å°†å‚æ•°å®šä¹‰åŒ…è£…åœ¨ `inputSchema` å¯¹è±¡ä¸­
   - æ›´ç¬¦åˆ JSON Schema è§„èŒƒ

## ğŸ§ª éªŒè¯æ­¥éª¤

### 1. æ„å»ºé¡¹ç›®
```bash
npm run build
```

### 2. æµ‹è¯• MCP å·¥å…·
```bash
node dist/cli.js test-feedback -m "æµ‹è¯•ä¿®å¤åçš„MCPå·¥å…·å®šä¹‰"
```

### 3. æ£€æŸ¥è¾“å‡º
åº”è¯¥çœ‹åˆ°ï¼š
```
âœ… MCPå·¥å…·å‡½æ•°æ³¨å†Œå®Œæˆ
âœ… WebæœåŠ¡å™¨å¯åŠ¨æˆåŠŸ
```

### 4. åœ¨ Augment ä¸­é‡æ–°é…ç½®
1. å…³é—­ MCP å¼€å…³
2. ç­‰å¾…å‡ ç§’é’Ÿ
3. é‡æ–°æ‰“å¼€ MCP å¼€å…³
4. æ£€æŸ¥çŠ¶æ€ç¯æ˜¯å¦å˜ä¸ºç»¿è‰²

## ğŸ“š MCP SDK ç‰ˆæœ¬å…¼å®¹æ€§

### å½“å‰ä½¿ç”¨ç‰ˆæœ¬
- **é¡¹ç›®ä¸­**: `@modelcontextprotocol/sdk: ^1.12.1`
- **SDK æºç **: `v1.12.1` (å·²éªŒè¯)

### API å˜æ›´å†å²
- **v1.10.x åŠä»¥å‰**: åªæ”¯æŒ `tool()` æ–¹æ³•
- **v1.11.x**: å¼•å…¥ `registerTool()` æ–¹æ³•
- **v1.12.x**: æ¨èä½¿ç”¨ `registerTool()`ï¼ŒæŸäº›ç¼–è¾‘å™¨å¼€å§‹ä¸¥æ ¼éªŒè¯

### å…¼å®¹æ€§å¯¹æ¯”
| ç¼–è¾‘å™¨ | tool() æ–¹æ³• | registerTool() æ–¹æ³• | éªŒè¯ä¸¥æ ¼åº¦ |
|--------|-------------|---------------------|------------|
| Cursor | âœ… æ”¯æŒ | âœ… æ”¯æŒ | å®½æ¾ |
| Augment | âš ï¸ éƒ¨åˆ†æ”¯æŒ | âœ… å®Œå…¨æ”¯æŒ | ä¸¥æ ¼ |

## ğŸ”® æœ€ä½³å®è·µå»ºè®®

### 1. ä½¿ç”¨æœ€æ–° API
å§‹ç»ˆä½¿ç”¨ `registerTool()` æ–¹æ³•æ³¨å†Œå·¥å…·ï¼Œç¡®ä¿æœ€ä½³å…¼å®¹æ€§ã€‚

### 2. å®Œæ•´çš„å·¥å…·å®šä¹‰
```typescript
server.registerTool(
  'tool_name',
  {
    description: 'è¯¦ç»†çš„å·¥å…·æè¿°',
    inputSchema: {
      param1: z.string().describe('å‚æ•°1æè¿°'),
      param2: z.number().describe('å‚æ•°2æè¿°')
    },
    // å¯é€‰ï¼šè¾“å‡ºæ¨¡å¼å®šä¹‰
    outputSchema: {
      result: z.string().describe('ç»“æœæè¿°')
    }
  },
  async (args) => {
    // å·¥å…·å®ç°
  }
);
```

### 3. é”™è¯¯å¤„ç†
```typescript
try {
  const result = await toolImplementation(args);
  return result;
} catch (error) {
  // é€‚å½“çš„é”™è¯¯å¤„ç†å’Œæ—¥å¿—è®°å½•
  throw new MCPError('Tool execution failed', 'TOOL_ERROR', error);
}
```

## ğŸš¨ æ•…éšœæ’é™¤

### å¦‚æœé—®é¢˜ä»ç„¶å­˜åœ¨

1. **æ£€æŸ¥ MCP é…ç½®æ–‡ä»¶**
   ```json
   {
     "mcpServers": {
       "mcp-feedback-collector": {
         "command": "node",
         "args": ["/path/to/dist/cli.js"],
         "env": {
           "MCP_WEB_PORT": "5069"
         }
       }
     }
   }
   ```

2. **é‡å¯ Augment**
   - å®Œå…¨å…³é—­ Augment Code
   - é‡æ–°å¯åŠ¨åº”ç”¨ç¨‹åº
   - é‡æ–°å¯ç”¨ MCP æœåŠ¡å™¨

3. **æ£€æŸ¥æ—¥å¿—**
   - æŸ¥çœ‹ Augment çš„å¼€å‘è€…å·¥å…·
   - æ£€æŸ¥ MCP æœåŠ¡å™¨çš„è¾“å‡ºæ—¥å¿—
   - å¯»æ‰¾å…·ä½“çš„é”™è¯¯ä¿¡æ¯

4. **ç‰ˆæœ¬å…¼å®¹æ€§**
   - ç¡®ä¿ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬çš„ MCP SDK
   - æ£€æŸ¥ Augment çš„ MCP æ”¯æŒç‰ˆæœ¬

## ğŸ“Š æµ‹è¯•ç»“æœ

### ä¿®å¤å‰
- âŒ Augment: çº¢è‰²çŠ¶æ€ï¼ŒéªŒè¯é”™è¯¯
- âœ… Cursor: ç»¿è‰²çŠ¶æ€ï¼Œæ­£å¸¸å·¥ä½œ

### ä¿®å¤å
- âœ… Augment: ç»¿è‰²çŠ¶æ€ï¼Œæ­£å¸¸å·¥ä½œ
- âœ… Cursor: ç»¿è‰²çŠ¶æ€ï¼Œç»§ç»­æ­£å¸¸å·¥ä½œ

## ğŸ¯ æ€»ç»“

è¿™ä¸ªé—®é¢˜çš„æ ¸å¿ƒæ˜¯ MCP SDK API çš„æ¼”è¿›å’Œä¸åŒç¼–è¾‘å™¨å¯¹ MCP è§„èŒƒéªŒè¯ä¸¥æ ¼ç¨‹åº¦çš„å·®å¼‚ã€‚é€šè¿‡ä½¿ç”¨æœ€æ–°çš„ `registerTool()` API å’Œå®Œæ•´çš„å·¥å…·å®šä¹‰æ ¼å¼ï¼Œæˆ‘ä»¬ç¡®ä¿äº†ä¸æ‰€æœ‰æ”¯æŒ MCP çš„ç¼–è¾‘å™¨çš„å…¼å®¹æ€§ã€‚

**å…³é”®è¦ç‚¹**:
1. ä½¿ç”¨ `registerTool()` è€Œä¸æ˜¯ `tool()`
2. æä¾›å®Œæ•´çš„å·¥å…·æè¿°
3. ä½¿ç”¨ `inputSchema` åŒ…è£…å‚æ•°å®šä¹‰
4. éµå¾ªæœ€æ–°çš„ MCP è§„èŒƒ

è¿™ä¸ªä¿®å¤ä¸ä»…è§£å†³äº† Augment çš„å…¼å®¹æ€§é—®é¢˜ï¼Œè¿˜æé«˜äº†æ•´ä½“çš„ä»£ç è´¨é‡å’Œæœªæ¥çš„å…¼å®¹æ€§ã€‚
